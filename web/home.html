<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>MI Movilidad</title>
	<meta content="" name="description">
	<meta content="" name="keywords">
	<!-- Favicons -->
	<link href="assets/img/MT.png" rel="icon">
	<link href="assets/img/MT.png" rel="apple-touch-icon">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
	<!-- Vendor CSS Files -->
	<link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
	<link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
	<link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
	<link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
	<link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
	<!-- Template Main CSS File -->
	<link href="assets/css/style.css" rel="stylesheet">


	<!-- Firebase App (el primer script) -->
	<script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js"></script>
	<!-- Firebase Firestore (el segundo script) -->
	<script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore.js"></script>

</head>
<script>
	document.addEventListener("DOMContentLoaded", function() {
	        // Obtener datos de usuario de la sesión
	        var email = null
	        email = sessionStorage.getItem("email");
	        const userCredentialsString = sessionStorage.getItem("userCredentials");
	        const userCredentials = JSON.parse(userCredentialsString);
	        console.log(email)
	        console.log(userCredentials);
	         const userUID = userCredentials.user.uid;
	         const dateString = new Date();
	        const day = dateString.getDate();
	const month = dateString.getMonth() + 1; // El mes es devuelto indexado desde 0, por eso se suma 1
	const year = dateString.getFullYear();
	// Formatear la fecha en el formato día/mes/año
	const formattedDate = `${day}/${month}/${year}`;
	  if (!email || email === "") {
	            // Si no hay sesión activa, mostrar un mensaje de alerta
	            alert("No hay una sesión activa. Por favor inicia sesión.");
	            window.location.href = "login.html";
	
	        }
	        else {
	                // Actualizar el contenido del elemento con el correo electrónico
	                alert('ola: ' + userUID + ' ' + formattedDate)
	                var welcomeMessage = document.getElementById("welcomeMessage");
	                welcomeMessage.textContent = "Bienvenid@ " + email;
	            }
	    });
	
</script>
<body>
	<!-- ======= Header ======= -->
	<header id="header" class="fixed-top ">
		<div class="container-fluid">
			<div class="row justify-content-center">
				<div class="col-xl-9 d-flex align-items-center justify-content-lg-between">
					<h1 class="logo me-auto me-lg-0"><a href="index.html">MI Movilidad</a></h1>
					<nav id="navbar" class="navbar order-last order-lg-0">
						<ul>
							<li><a class="nav-link scrollto" href="#pricing">Suscripción</a></li>
							<li><a class="nav-link scrollto" href="#contact">Contactanos</a></li>
						</ul>
						<i class="bi bi-list mobile-nav-toggle"></i>
					</nav>
					<!-- .navbar -->
					<button><a class="nav-link logged-out" href="login.html">Comenzar</a></button>
					<button id="logoutButton"><a class="nav-link logged-in" href="#">Cerrar Sesión</a></button>
				</div>
			</div>
		</div>
	</header>
	<!-- End Header -->
	<!-- ======= Hero Section ======= -->
	<section id="hero" class="d-flex flex-column justify-content-center">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-xl-8">
					<h1 id="welcomeMessage">MI Movilidad</h1>
					<h2>Tu pones el destino, nosotros la ruta.</h2>
				</div>
			</div>
		</div>
	</section>
	<!-- End Hero -->
	<main id="main">
		<!-- ======= Cta Section ======= -->
		<section id="cta" class="cta">
			<div class="container">
				<div class="row">
					<div class="col-lg-9 text-center text-lg-start">
            <h3>Prueba la Aplicación</h3>
            <p> Descarga MI Movilidad sin ningún costo y prueba sus beneficios para eficientar tus viajes dentro de la red de Movilidad Integrada.</p>
            <p>-Consulta lo mapas de los diferentes transportes de la Movilidad Integrada</p>
            <p>-Calcula rutas</p>
            <p>-Guarda tus rutas</p>
            <p>-Reporta incidentes y consulta avisos por parte de nosotros y otros usuarios </p>
            <p></p>
          </div>
					<div class="col-lg-3 cta-btn-container text-center">
						<a class="cta-btn align-middle" href="#">Descargar</a>
					</div>
				</div>
			</div>
		</section>
		<!-- End Cta Section -->
		<!-- ======= Pricing Section ======= -->
		<section id="pricing" class="pricing">
			<div class="container">
				<div class="section-title">
					<h2>Planes</h2>
					<p>Un nuevo nivel de movilidad. Adquiere MI Movilidad premium para navegar sin conexión a internet y desbloquear nuevas funciones.</p>
				</div>
				<div class="row">
					<div class="col-lg-4 col-md-6">
						<div class="box">
							<h3>Mensual</h3>
							<h4><sup>$</sup>29.99<span> / Mes</span></h4>
							<ul>
								<li>Beneficios gratis</li>
								<li>Rutas offline</li>
								<li>Seguimiento de vehículos</li>
								<li>Comparte tu ubicacion</li>
								<li>Consulta informacion offline</li>
							</ul>
							<div class="btn-wrap">
								<a href="#" class="btn-buy">

									<!-- ======= Cham me vas a odiar un boton dentro de otro AAAAAAAAAAA ======= -->

									<div id="smart-button-container">
										<div style="text-align: center;">
											<div id="paypal-button-container"></div>
										</div>
									</div>
									<script src="https://www.paypal.com/sdk/js?client-id=AcLpV5ZXygYID7Ndf87hEMLX2MW-9_SzjaP7NRb8u48_PJDyqReiSQH-Dunq649A2uacNCG2pSAiMKJc&currency=MXN" data-sdk-integration-source="button-factory"></script>
									<script>
										function initPayPalButton() {
										                    paypal.Buttons({
										                      style: {
										                        shape: 'rect',
										                        color: 'gold',
										                        layout: 'vertical',
										                        label: 'pay',
										                        
										                      },
										              
										                      createOrder: function(data, actions) {
										                        return actions.order.create({
										                          purchase_units: [{"description":"Acceso a 1 mes de beneficios premium de MiMovilidad","amount":{"currency_code":"MXN","value":29.99}}]
										                        });
										                      },
										              
										                      onApprove: function(data, actions) {
										                          console.log('Se aprobó tu pago: ', userUID);
										                          alert('Se aprobó tu pago: ' + userUID)
										                          return actions.order.capture().then(function(orderData) {
										                            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
										
										                            const currentDate = new Date();
										
										// Actualizar el campo "fecha" en el documento del usuario en Firestore
										const userDocRef = db.collection('users').doc(userUID);
										return userDocRef.update({
										    fecha: currentDate
										}).then(function() {
										    console.log('Campo "fecha" actualizado en Firestore');
										    actions.redirect('http://127.0.0.1:5500/web/home.html');
										}).catch(function(error) {
										    console.error('Error al actualizar el campo "fecha" en Firestore:', error);
										});
										
										
										
										                          });
										                        },
										              
										                      onError: function(err) {
										                        console.log(err);
										                      }
										                    }).render('#paypal-button-container');
										                  }
										                  initPayPalButton();
										
									</script>




								</a>
							</div>
						</div>
					</div>
					<div class="col-lg-4 col-md-6 mt-4 mt-lg-0">
						<div class="box">
							<h3>Semestral</h3>
							<h4><sup>$</sup>169.99<span> / 6 Meses</span></h4>
							<ul>
								<li>Beneficios gratis</li>
								<li>Rutas offline</li>
								<li>Seguimiento de vehículos</li>
								<li>Comparte tu ubicacion</li>
								<li>Consulta informacion offline</li>
							</ul>
							<div class="btn-wrap">
								<a href="#" class="btn-buy">

									<!-- ======= Cham me vas a odiar un boton dentro de otro AAAAAAAAAAA ======= -->

									<div id="smart-button-container-1">
										<div style="text-align: center;">
											<div id="paypal-button-container-1"></div>
										</div>
									</div>
									<script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=MXN" data-sdk-integration-source="button-factory"></script>
									<script>
										function initPayPalButton1() {
										                      paypal.Buttons({
										                        style: {
										                          shape: 'rect',
										                          color: 'gold',
										                          layout: 'vertical',
										                          label: 'pay',
										                        },
										                        createOrder: function(data, actions) {
										                          return actions.order.create({
										                            purchase_units: [{"description":"Acceso a 12 meses de beneficios premium de MiMovilidad","amount":{"currency_code":"MXN","value":169.99}}]
										                          });
										                        },
										                        onApprove: function(data, actions) {
										                          console.log('Se aprobó tu pago: ', userUID);
										                          alert('Se aprobó tu pago: ' + userUID)
										                          return actions.order.capture().then(function(orderData) {
										                            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
										
										                            const currentDate = new Date();
										
										// Actualizar el campo "fecha" en el documento del usuario en Firestore
										const userDocRef = db.collection('users').doc(userUID);
										return userDocRef.update({
										    fecha: currentDate
										}).then(function() {
										    console.log('Campo "fecha" actualizado en Firestore');
										    actions.redirect('http://127.0.0.1:5500/web/home.html');
										}).catch(function(error) {
										    console.error('Error al actualizar el campo "fecha" en Firestore:', error);
										});
										
										
										
										                          });
										                        },
										                        onError: function(err) {
										                          console.log(err);
										                        }
										                      }).render('#paypal-button-container-1');
										                    }
										                    initPayPalButton1();
										
									</script>




								</a>
							</div>
						</div>
					</div>
					<div class="col-lg-4 col-md-6 mt-4 mt-md-0">
						<div class="box recommended">
							<span class="recommended-badge">Recomendado</span>
							<h3>Anual</h3>
							<h4><sup>$</sup>299.99<span> / Año</span></h4>
							<ul>
								<li>Beneficios gratis</li>
								<li>Rutas offline</li>
								<li>Seguimiento de vehículos</li>
								<li>Comparte tu ubicacion</li>
								<li>Consulta informacion offline</li>
								<li>Super precio</li>
							</ul>
							<div class="btn-wrap">
								<a href="#" class="btn-buy">

									<!-- ======= Cham me vas a doiar un boton dentro de otro AAAAAAAAAAA ======= -->

									<div id="smart-button-container-2">
										<div style="text-align: center;">
											<div id="paypal-button-container-2"></div>
										</div>
									</div>
									<script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=MXN" data-sdk-integration-source="button-factory"></script>

									<script>
										const userCredentialsString = sessionStorage.getItem("userCredentials");
										                    const userCredentials = JSON.parse(userCredentialsString);
										                    const userUID = userCredentials.user.uid;
										                    function initPayPalButton2() {
										                      paypal.Buttons({
										                        style: {
										                          shape: 'rect',
										                          color: 'gold',
										                          layout: 'vertical',
										                          label: 'pay',
										                        },
										                        createOrder: function(data, actions) {
										                          return actions.order.create({
										                            purchase_units: [{"description":"Acceso a 12 meses de beneficios premium de MiMovilidad","amount":{"currency_code":"MXN","value":299.99}}]
										                          });
										                        },
										                        onApprove: function(data, actions) {
										                          console.log('Se aprobó tu pago: ', userUID);
										                          alert('Se aprobó tu pago: ' + userUID)
										                          return actions.order.capture().then(function(orderData) {
										                            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
										
										                            const currentDate = new Date();
										
										// Actualizar el campo "fecha" en el documento del usuario en Firestore
										const userDocRef = db.collection('users').doc(userUID);
										return userDocRef.update({
										    fecha: currentDate
										}).then(function() {
										    console.log('Campo "fecha" actualizado en Firestore');
										    actions.redirect('http://127.0.0.1:5500/web/home.html');
										}).catch(function(error) {
										    console.error('Error al actualizar el campo "fecha" en Firestore:', error);
										});
										
										
										
										                          });
										                        },
										                        onError: function(err) {
										                          console.log(err);
										                        }
										                      }).render('#paypal-button-container-2');
										                    }
										                    initPayPalButton2();
										
									</script>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- End Pricing Section -->
		<!-- ======= Contact Section ======= -->
		<section id="contact" class="contact">
			<div class="container">
				<div class="section-title">
					<h2>Contactanos</h2>
					<p>Deja tus comentarios, sugerencias o problemas para que te podamos atender y responder.</p>
				</div>
			</div>
			<div>
        <iframe style="border:0; width: 100%; height: 350px;" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d940.5103227058364!2d-99.17550551186497!3d19.45378648905245!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1f8bd9777a765%3A0x57501a5479751d18!2sCentro%20de%20Estudios%20Cient%C3%ADficos%20y%20Tecnol%C3%B3gicos%20N%C2%B0%209%20%22Juan%20de%20Dios%20B%C3%A1tiz%22%20IPN!5e0!3m2!1ses-419!2smx!4v1712392521441!5m2!1ses-419!2smx" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
			</div>
			<div class="container">
				<div class="row mt-5">
					<div class="col-lg-4">
						<div class="info">
							<div class="address">
								<i class="ri-map-pin-line"></i>
								<h4>Ubicacion:</h4>
								<p>Mar Mediterráneo 227, Nextitla, Miguel Hidalgo, 11420 Ciudad de México, CDMX</p>
							</div>
							<div class="email">
								<i class="ri-mail-line"></i>
								<h4>Correo electronico:</h4>
								<a href="mailto:mitransporte.softux@gmail.com"><p>mitransporte.softux@gmail.com</p></a>
                <a href="mailto:SOFTUXMX@outlook.com"><p>SOFTUXMX@outlook.com</p></a>
							</div>
							<div class="phone">
								<i class="ri-phone-line"></i>
								<h4>Telefono:</h4>
								<a href="https://wa.me/525587336145"><p>55 87336145</p></a>
							</div>
						</div>
					</div>
					
				</div>
			</div>
		</section>
		<!-- End Contact Section -->
	</main>
	<!-- End #main -->
	<!-- ======= Footer ======= -->
	<footer id="footer">
		<div class="container">
			<h3>MI Movilidad</h3>
			<p>Tu pones el destino, nosotros la ruta.</p>
			<div class="social-links">
				<a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
				<a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
				<a href="https://www.instagram.com/mitransporte_mx?igsh=empqc3ByZWhvem50" class="instagram"><i class="bx bxl-instagram"></i></a>
				<a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
				<a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
			</div>
			<div class="copyright">
				&copy; <strong><span>MI Movilidad</span></strong>.
			</div>
		</div>
	</footer>
	<!-- End Footer -->
	<div id="preloader"></div>
	<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
	<!-- Vendor JS Files -->
	<script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
	<script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
	<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
	<script src="assets/vendor/php-email-form/validate.js"></script>
	<!-- Template Main JS File -->
	<script src="assets/js/main.js"></script>
	<script src="app/autenticacion/logout.js"></script>
</body>
</html>